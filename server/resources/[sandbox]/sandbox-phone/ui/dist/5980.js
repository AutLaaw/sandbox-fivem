"use strict";(self.webpackChunksandbox_phone=self.webpackChunksandbox_phone||[]).push([[2650,5765,5980],{5765:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(96540),a=n(62969),c=n(95093),o=n.n(c),l=n(32849),i=(0,a.A)(function(e){return{race:{display:"flex",fontFamily:"Aclonica",transition:"background ease-in 0.15s"},placing:{width:50,textAlign:"center",lineHeight:"50px","& span":{fontFamily:"Lexend Peta",color:function(e){return e.color},fontSize:34}},label:{flexGrow:1,maxWidth:"calc(100% - 50px)",width:"100%"},raceNameBasic:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:"50px"},raceName:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:"24px",marginTop:6},trackName:{fontSize:12,lineHeight:"14px","& small":{fontSize:10}},arrow:{width:50,textAlign:"center",lineHeight:"50px"}}});const u=function(e){var t=e.name,n=e.racer,a=(0,l.dp)("blueline"),c=i(a);if(n.finished){var u=o().duration(n.fastest.lap_end-n.fastest.lap_start);return r.createElement("div",{className:c.race},r.createElement("div",{className:c.placing},Boolean(n.place)?"#".concat(n.place):"DNF"),r.createElement("div",{className:c.label},r.createElement("div",{className:c.raceName},t),r.createElement("div",{className:c.trackName},"Fastest Lap:"," ","".concat(String(u.hours()).padStart(2,"0"),":").concat(String(u.minutes()).padStart(2,"0"),":").concat(String(u.seconds()).padStart(2,"0"),":").concat(String(u.milliseconds()).padStart(3,"0")))))}return r.createElement("div",{className:c.race},r.createElement("div",{className:c.placing},"-"),r.createElement("div",{className:c.label},r.createElement("div",{className:c.raceNameBasic},t)))}},35980:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(96540),a=n(69733),c=n(11641),o=n(15849),l=n(62969),i=n(46784),u=n(47767),s=n(32849),f=n(71544),m=(n(72608),n(5765)),d=n(92650),p=n(16783);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var i=r&&r.prototype instanceof l?r:l,u=Object.create(i.prototype);return y(u,"_invoke",function(n,r,a){var c,l,i,u=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return c=t,l=0,i=e,m.n=n,o}};function d(n,r){for(l=n,i=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,c=s[t],d=m.p,p=c[2];n>3?(a=p===r)&&(i=c[(l=c[4])?5:(l=3,3)],c[4]=c[5]=e):c[0]<=d&&((a=n<2&&d<c[1])?(l=0,m.v=r,m.n=c[1]):d<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,m.n=p,l=0))}if(a||n>1)return o;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,p),l=s,i=p;(t=l<2?e:i)||!f;){c||(l?l<3?(l>1&&(m.n=-1),d(l,i)):m.n=i:m.v=i);try{if(u=2,c){if(l||(a="next"),t=c[a]){if(!(t=t.call(c,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,l<2&&(l=0)}else 1===l&&(t=c.return)&&t.call(c),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);c=e}else if((t=(f=m.n<0)?i:n.call(r,m))!==o)break}catch(t){c=e,l=1,i=t}finally{u=1}}return{value:t,done:f}}}(n,a,c),!0),u}var o={};function l(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,y(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return i.prototype=u,y(f,"constructor",u),y(u,"constructor",i),i.displayName="GeneratorFunction",y(u,a,"GeneratorFunction"),y(f),y(f,a,"Generator"),y(f,r,function(){return this}),y(f,"toString",function(){return"[object Generator]"}),(b=function(){return{w:c,m}})()}function y(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}y=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var c=function(t,n){y(e,t,function(e){return this._invoke(t,n,e)})};c("next",0),c("throw",1),c("return",2)}},y(e,t,n,r)}function h(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var c=e.apply(t,n);function o(e){h(c,r,a,o,l,"next",e)}function l(e){h(c,r,a,o,l,"throw",e)}o(void 0)})}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=(0,l.A)(function(e){return S(S(S(S(S(S(S({header:{display:"inline-block",fontSize:16,marginLeft:8,"& svg":{marginRight:4}},content:{height:"87%",overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.primary.main},"&::-webkit-scrollbar-track":{background:"transparent"}},links:{width:"100%",borderBottom:"1px solid ".concat(e.palette.border.divider)},link:{textAlign:"center",fontSize:28,padding:10,transition:"color ease-in 0.15s","&:hover":{cursor:"pointer",color:function(e){return e.color}}}},"header",{textAlign:"center",fontSize:20,color:e.palette.text.main,position:"relative","& span":{background:e.palette.secondary.main,padding:4,zIndex:1,position:"relative"},"&::before":{content:'" "',display:"block",height:2,background:function(e){return e.color},width:"100%",position:"absolute",top:0,bottom:0,margin:"auto",zIndex:0}}),"content",{padding:8}),"contentInner",{padding:"0 16px"}),"label",{fontSize:12,color:e.palette.text.alt}),"value",{fontSize:16,color:e.palette.text.main,transition:"color ease-in 0.15s","&.clickable:hover":{cursor:"pointer",color:function(e){return e.color}}}),"racers",{padding:8,maxHeight:"51%",overflow:"auto",height:"100%"}),"racersInner",{padding:"0 16px",maxHeight:"90%",overflow:"auto",height:"100%"})});const N=function(){var e=(0,s.dp)("blueline"),t=k(e),n=(0,u.Zp)(),l=(0,s.MW)(),v=(0,a.wA)(),y=(0,u.g)().race,h=(0,a.d4)(function(e){return e.data.data.player.SID}),w=(0,a.d4)(function(e){return e.data.data.onDuty}),S=(0,a.d4)(function(e){var t;return null===(t=e.data.data.player)||void 0===t?void 0:t.Callsign}),N=(0,a.d4)(function(e){return e.race.inRace}),A=(0,a.d4)(function(e){return e.data.data.tracks_pd}),R=(0,a.d4)(function(e){return e.pdRace.races})[y],x=E((0,r.useState)(!1),2),j=x[0],O=x[1],P=E((0,r.useState)(null),2),C=P[0],D=P[1];(0,r.useEffect)(function(){O(!1)},[y]),(0,r.useEffect)(function(){Boolean(R)&&(D(A.filter(function(e){return e.id==R.track})[0]),O(!0))},[R]);var F=function(){var e=g(b().m(function e(){var t,n;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.A.send("JoinRacePD",R.id);case 1:return e.n=2,e.v.json();case 2:t=e.v,l(t?"Joined Race":"Unable to Join Race"),t&&v({type:"PD_I_RACE",payload:{state:!0}}),e.n=4;break;case 3:e.p=3,n=e.v,console.error(n),l("Unable to Join Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=g(b().m(function e(){var t,r;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.A.send("LeaveRacePD",R.id);case 1:return e.n=2,e.v.json();case 2:t=e.v,l(t?"Left Race":"Unable to Leave Race"),t&&(v({type:"PD_I_RACE",payload:{state:!1}}),n("/apps/blueline",{replace:!0})),e.n=4;break;case 3:e.p=3,r=e.v,console.error(r),l("Unable to Leave Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=g(b().m(function e(){var t,r;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.A.send("CancelRacePD",R.id);case 1:return e.n=2,e.v.json();case 2:t=e.v,l(t?"Cancelled Race":"Unable to Cancel Race"),t&&(v({type:"PD_I_RACE",payload:{state:!1}}),n("/apps/blueline",{replace:!0})),e.n=4;break;case 3:e.p=3,r=e.v,console.error(r),l("Unable to Cancel Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=g(b().m(function e(){var t,n;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.A.send("StartRacePD",R.id);case 1:return e.n=2,e.v.json();case 2:t=e.v,l(null!=t&&t.failed?t.message:"Starting Race"),e.n=4;break;case 3:e.p=3,n=e.v,console.error(n),l("Unable to Start Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=g(b().m(function e(){var t,n;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.A.send("EndRacePD",R.id);case 1:return e.n=2,e.v.json();case 2:t=e.v,l(t?"Race Ended":"Unable to End Race"),e.n=4;break;case 3:e.p=3,n=e.v,console.error(n),l("Unable to End Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}();return r.createElement(f.RT,{appId:"blueline",titleOverride:!!Boolean(R)&&R.name,actionShow:Boolean(S)&&"police"==w,actions:r.createElement(r.Fragment,null,r.createElement(c.A,{onClick:function(){return n(-1)}},r.createElement(i.g,{icon:["fas","arrow-left"]})),(null==R?void 0:R.host_id)==h?0==(null==R?void 0:R.state)?r.createElement(r.Fragment,null,r.createElement(o.A,{title:"Cancel Race"},r.createElement(c.A,{onClick:I},r.createElement(i.g,{icon:["fas","xmark"]}))),r.createElement(o.A,{title:"Start Race"},r.createElement(c.A,{onClick:z},r.createElement(i.g,{icon:["fas","play"]})))):2!=(null==R?void 0:R.state)?r.createElement(o.A,{title:"End Race"},r.createElement(c.A,{onClick:U},r.createElement(i.g,{icon:["fas","ban"]}))):null:r.createElement(r.Fragment,null,!N&&Boolean(R)&&0==(null==R?void 0:R.state)?r.createElement(o.A,{title:"Join Race"},r.createElement(c.A,{onClick:F},r.createElement(i.g,{icon:["fas","right-to-bracket"]}))):0!=(null==R?void 0:R.state)&&1!=(null==R?void 0:R.state)||!Boolean(R.racers[S])?null:r.createElement(o.A,{title:"Leave Race"},r.createElement(c.A,{onClick:_},r.createElement(i.g,{icon:["fas","right-from-bracket"]})))))},S&&"police"==w?Boolean(R)?r.createElement(r.Fragment,null,j?Boolean(R)&&Boolean(C)?r.createElement(r.Fragment,null,r.createElement("div",{className:t.content},r.createElement("div",{className:t.header},r.createElement("span",null,"Race Details")),r.createElement("div",{className:t.contentInner},r.createElement("div",{className:t.item},r.createElement("div",{className:t.label},"Host"),r.createElement("div",{className:t.value},R.host)),r.createElement("div",{className:t.item},r.createElement("div",{className:t.label},"State"),r.createElement("div",{className:t.value},-1==(null==R?void 0:R.state)?r.createElement("span",null,"Cancelled"):0==(null==R?void 0:R.state)?r.createElement("span",null,"Setting Up"):1==(null==R?void 0:R.state)?r.createElement("span",null,"In Progress"):2==(null==R?void 0:R.state)?r.createElement("span",null,"Finished"):null)),r.createElement("div",{className:t.item},r.createElement("div",{className:t.label},"Track"),r.createElement("div",{className:t.value},C.Name," (",C.Distance,")")),r.createElement("div",{className:t.item},r.createElement("div",{className:t.label},"# of Laps"),r.createElement("div",{className:t.value},R.laps)),r.createElement("div",{className:t.item},r.createElement("div",{className:t.label},"Race Phasing"),r.createElement("div",{className:t.value},R.phasing?"Enabled":"Disabled")))),r.createElement("div",{className:t.racers},r.createElement("div",{className:t.header},r.createElement("span",null,"Racers")),r.createElement("div",{className:t.racersInner},Object.keys(R.racers).length>0?2==(null==R?void 0:R.state)?r.createElement(r.Fragment,null,r.createElement("div",{className:t.label},"Podium"),Object.keys(R.racers).filter(function(e){return R.racers[e].finished}).sort(function(e,t){return R.racers[e].place-R.racers[t].place}).slice(0,3).map(function(e){return r.createElement(m.default,{key:e,name:e,race:R,track:C,racer:R.racers[e]})}),Object.keys(R.racers).filter(function(e){return R.racers[e].finished&&R.racers[e].place>3}).length>0&&r.createElement(r.Fragment,null,r.createElement("div",{className:t.label},"Other Racers"),Object.keys(R.racers).filter(function(e){return R.racers[e].finished&&R.racers[e].place>3}).sort(function(e,t){return R.racers[e].place-R.racers[t].place}).map(function(e){return r.createElement(m.default,{key:e,name:e,race:R,track:C,racer:R.racers[e]})})),Object.keys(R.racers).filter(function(e){return!R.racers[e].finished}).length>0&&r.createElement(r.Fragment,null,r.createElement("div",{className:t.label},"DNF'd"),Object.keys(R.racers).filter(function(e){return!R.racers[e].finished}).map(function(e){return r.createElement(m.default,{key:e,name:e,race:R,track:C,racer:R.racers[e]})}))):Object.keys(R.racers).map(function(e){return r.createElement(m.default,{key:e,name:e,race:R,track:C,racer:R.racers[e]})}):r.createElement("div",{className:t.noracers},"No Racers Signed Up")))):r.createElement("div",null,"Viewing Legacy Races Not Yet Supported"):r.createElement(f.aH,null)):r.createElement("div",null,"Invalid Race Data"):r.createElement(d.default,null))}},72608:(e,t,n)=>{n.d(t,{WX:()=>c,f0:()=>l,v3:()=>o});n(65848);var r=n(99418),a=n(25232),c=function(e){return(0,a.Ay)(r.A.sanitize(e))},o=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),l=function(e){var t=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"".concat(t[1],"-").concat(t[2],"-").concat(t[3]):null}},92650:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(96540),a=n(62969),c=n(32849);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=(0,a.A)(function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,textAlign:"center"},content:l(l(l(l({margin:"auto",position:"absolute",top:0,bottom:0,left:0,right:0,height:"fit-content",width:"fit-content"},"width","80%"),"fontSize",28),"fontWeight","bold"),"color",function(e){return e.color})}});const u=function(e){var t=(0,c.dp)("blueline"),n=i(t);return r.createElement("div",{className:n.wrapper},r.createElement("div",{className:n.content},"Not Authorized"))}}}]);