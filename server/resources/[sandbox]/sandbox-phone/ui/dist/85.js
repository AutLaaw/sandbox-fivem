"use strict";(self.webpackChunksandbox_phone=self.webpackChunksandbox_phone||[]).push([[85],{10085:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var r=t(96540),a=t(69733),c=t(11641),l=t(15849),o=t(49799),i=t(44635),u=t(82241),s=t(62969),d=t(46784),m=t(47767),f=t(32849),p=t(71544),v=t(72608),y=t(58796),E=t(16783),b=t(58824);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function g(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function c(t,r,a,c){var i=r&&r.prototype instanceof o?r:o,u=Object.create(i.prototype);return k(u,"_invoke",function(t,r,a){var c,o,i,u=0,s=a||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return c=n,o=0,i=e,m.n=t,l}};function f(t,r){for(o=t,i=r,n=0;!d&&u&&!a&&n<s.length;n++){var a,c=s[n],f=m.p,p=c[2];t>3?(a=p===r)&&(i=c[(o=c[4])?5:(o=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=t<2&&f<c[1])?(o=0,m.v=r,m.n=c[1]):f<p&&(a=t<3||c[0]>r||r>p)&&(c[4]=t,c[5]=r,m.n=p,o=0))}if(a||t>1)return l;throw d=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&f(s,p),o=s,i=p;(n=o<2?e:i)||!d;){c||(o?o<3?(o>1&&(m.n=-1),f(o,i)):m.n=i:m.v=i);try{if(u=2,c){if(o||(a="next"),n=c[a]){if(!(n=n.call(c,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,o<2&&(o=0)}else 1===o&&(n=c.return)&&n.call(c),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);c=e}else if((n=(d=m.n<0)?i:t.call(r,m))!==l)break}catch(n){c=e,o=1,i=n}finally{u=1}}return{value:n,done:d}}}(t,a,c),!0),u}var l={};function o(){}function i(){}function u(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(k(n={},r,function(){return this}),n),d=u.prototype=o.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,k(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return i.prototype=u,k(d,"constructor",u),k(u,"constructor",i),i.displayName="GeneratorFunction",k(u,a,"GeneratorFunction"),k(d),k(d,a,"Generator"),k(d,r,function(){return this}),k(d,"toString",function(){return"[object Generator]"}),(g=function(){return{w:c,m}})()}function k(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}k=function(e,n,t,r){if(n)a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var c=function(n,t){k(e,n,function(e){return this._invoke(n,t,e)})};c("next",0),c("throw",1),c("return",2)}},k(e,n,t,r)}function w(e,n,t,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void t(e)}o.done?n(i):Promise.resolve(i).then(r,a)}function S(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var c=e.apply(n,t);function l(e){w(c,r,a,l,o,"next",e)}function o(e){w(c,r,a,l,o,"throw",e)}l(void 0)})}}function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,c,l,o=[],i=!0,u=!1;try{if(c=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;i=!1}else for(;!(i=(r=c.call(t)).done)&&(o.push(r.value),o.length!==n);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return N(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function R(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==h(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var x=(0,s.A)(function(e){return R(R(R(R(R(R(R({header:{display:"inline-block",fontSize:16,marginLeft:8,"& svg":{marginRight:4}},content:{height:"87%",overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.primary.main},"&::-webkit-scrollbar-track":{background:"transparent"}},links:{width:"100%",borderBottom:"1px solid ".concat(e.palette.border.divider)},link:{textAlign:"center",fontSize:28,padding:10,transition:"color ease-in 0.15s","&:hover":{cursor:"pointer",color:function(e){return e.color}}}},"header",{textAlign:"center",fontSize:20,color:e.palette.text.main,position:"relative","& span":{background:e.palette.secondary.main,padding:4,zIndex:1,position:"relative"},"&::before":{content:'" "',display:"block",height:2,background:function(e){return e.color},width:"100%",position:"absolute",top:0,bottom:0,margin:"auto",zIndex:0}}),"content",{padding:8}),"contentInner",{padding:"0 16px"}),"label",{fontSize:12,color:e.palette.text.alt}),"value",{fontSize:16,color:e.palette.text.main,transition:"color ease-in 0.15s","&.clickable:hover":{cursor:"pointer",color:function(e){return e.color}}}),"racers",{padding:8,maxHeight:"51%",overflow:"auto",height:"100%"}),"racersInner",{padding:"0 16px",maxHeight:"90%",overflow:"auto",height:"100%",listStyle:"none !important"})});const j=function(){var e,n,t,s,h,k=(0,f.dp)("redline"),w=x(k),N=(0,m.Zp)(),R=(0,f.MW)(),j=(0,a.wA)(),C=(0,m.g)().race,I=(0,a.d4)(function(e){return e.data.data.onDuty}),O=(0,a.d4)(function(e){return e.data.data.player.SID}),B=(0,a.d4)(function(e){var n;return null===(n=e.data.data.player)||void 0===n||null===(n=n.Profiles)||void 0===n||null===(n=n.redline)||void 0===n?void 0:n.name}),F=(0,a.d4)(function(e){return e.race.inRace}),_=(0,a.d4)(function(e){return e.data.data.tracks}),P=(0,a.d4)(function(e){return e.race.races})[C],T=b.GhostTypes.filter(function(e){return e.value==P.phasing})[0],U=A((0,r.useState)(!1),2),z=U[0],D=U[1],L=A((0,r.useState)(null),2),H=L[0],W=L[1],G=A((0,r.useState)(null),2),J=G[0],$=G[1],Y=A((0,r.useState)(null),2),M=Y[0],V=Y[1],X=A((0,r.useState)(!1),2),Z=X[0],q=X[1];(0,r.useEffect)(function(){D(!1)},[C]),(0,r.useEffect)(function(){Boolean(P)&&(W(_.filter(function(e){return e.id==P.track})[0]),D(!0))},[P]);var K=function(){var e=S(g().m(function e(){var n,t;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("JoinRace",P.id);case 1:return e.n=2,e.v.json();case 2:n=e.v,R(n?"Joined Race":"Unable to Join Race"),n&&j({type:"I_RACE",payload:{state:!0}}),e.n=4;break;case 3:e.p=3,t=e.v,console.error(t),R("Unable to Join Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=S(g().m(function e(){var n,t;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("LeaveRace",P.id);case 1:return e.n=2,e.v.json();case 2:n=e.v,R(n?"Left Race":"Unable to Leave Race"),n&&(j({type:"I_RACE",payload:{state:!1}}),N("/apps/redline",{replace:!0})),e.n=4;break;case 3:e.p=3,t=e.v,console.error(t),R("Unable to Leave Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=S(g().m(function e(){var n,t;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("CancelRace",P.id);case 1:return e.n=2,e.v.json();case 2:n=e.v,R(n?"Cancelled Race":"Unable to Cancel Race"),n&&(j({type:"I_RACE",payload:{state:!1}}),N("/apps/redline",{replace:!0})),e.n=4;break;case 3:e.p=3,t=e.v,console.error(t),R("Unable to Cancel Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=S(g().m(function e(){var n,t;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("StartRace",P.id);case 1:return e.n=2,e.v.json();case 2:n=e.v,R(null!=n&&n.failed?n.message:"Starting Race"),e.n=4;break;case 3:e.p=3,t=e.v,console.error(t),R("Unable to Start Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),te=function(){var e=S(g().m(function e(){var n,t;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("EndRace",P.id);case 1:return e.n=2,e.v.json();case 2:n=e.v,R(n?"Event Ended":"Unable to End Event"),n&&(j({type:"I_RACE",payload:{state:!1}}),N("/apps/redline",{replace:!0})),e.n=4;break;case 3:e.p=3,t=e.v,console.error(t),R("Error Ending Event");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),re=function(e){$(e)},ae=function(){var e=S(g().m(function e(){var n,t;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("RemoveFromRace",{id:P.id,alias:J});case 1:return e.n=2,e.v.json();case 2:n=e.v,R(n?"".concat(J," Removed From Event"):"Unable to Remove From Event"),e.n=4;break;case 3:e.p=3,t=e.v,console.error(t),R("Error Removing From Event");case 4:$(null);case 5:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=S(g().m(function e(n){var t,r;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.preventDefault(),e.p=1,e.n=2,E.A.send("SendInvite",{id:P.id,alias:n.target.alias.value});case 2:return e.n=3,e.v.json();case 3:t=e.v,R(t?"Event Invite Sent":"Unable to Send Invite"),e.n=5;break;case 4:e.p=4,r=e.v,console.error(r),R("Error Sending Invite");case 5:q(!1);case 6:return e.a(2)}},e,null,[[1,4]])}));return function(n){return e.apply(this,arguments)}}();return r.createElement(p.RT,{appId:"redline",titleOverride:!!Boolean(P)&&P.name,actionShow:Boolean(B)&&"police"!=I,actions:r.createElement(r.Fragment,null,r.createElement(c.A,{onClick:function(){return N(-1)}},r.createElement(d.g,{icon:["fas","arrow-left"]})),(null==P?void 0:P.host_id)==O&&0==P.state&&"invite"==P.access&&r.createElement(l.A,{title:"Invite Racer To Event"},r.createElement(c.A,{onClick:function(){return q(!0)}},r.createElement(d.g,{icon:["far","envelope"]}))),(null==P?void 0:P.host_id)==O?0==(null==P?void 0:P.state)?r.createElement(r.Fragment,null,r.createElement(l.A,{title:"Cancel Race"},r.createElement(c.A,{onClick:ee},r.createElement(d.g,{icon:["fas","xmark"]}))),r.createElement(l.A,{title:"Start Race"},r.createElement(c.A,{onClick:ne},r.createElement(d.g,{icon:["fas","play"]})))):2!=(null==P?void 0:P.state)?r.createElement(l.A,{title:"End Race"},r.createElement(c.A,{onClick:te},r.createElement(d.g,{icon:["fas","ban"]}))):null:r.createElement(r.Fragment,null,F||!Boolean(P)||0!=(null==P?void 0:P.state)||Boolean(P.racers[B])||"public"!=P.access?0!=(null==P?void 0:P.state)&&1!=(null==P?void 0:P.state)||!Boolean(P.racers[B])?null:r.createElement(l.A,{title:"Leave Race"},r.createElement(c.A,{onClick:Q},r.createElement(d.g,{icon:["fas","right-from-bracket"]}))):r.createElement(l.A,{title:"Join Race"},r.createElement(c.A,{onClick:K},r.createElement(d.g,{icon:["fas","right-to-bracket"]})))))},z&&Boolean(P)&&Boolean(H)?Boolean(P)&&Boolean(H)?r.createElement(r.Fragment,null,r.createElement("div",{className:w.content},r.createElement("div",{className:w.header},r.createElement("span",null,"Event #",P.id," Details")),r.createElement("div",{className:w.contentInner},r.createElement("div",{className:w.item},r.createElement("div",{className:w.label},"Host"),r.createElement("div",{className:"".concat(w.value," clickable"),onClick:function(){return e=P.host,void N("/apps/redline/profile/".concat(e));var e}},P.host)),r.createElement("div",{className:w.item},r.createElement("div",{className:w.label},"State"),r.createElement("div",{className:w.value},-1==(null==P?void 0:P.state)?r.createElement("span",null,"Cancelled"):0==(null==P?void 0:P.state)?r.createElement("span",null,"Setting Up"):1==(null==P?void 0:P.state)?r.createElement("span",null,"In Progress"):2==(null==P?void 0:P.state)?r.createElement("span",null,"Finished"):null)),r.createElement("div",{className:w.item},r.createElement("div",{className:w.label},"Buy In"),r.createElement("div",{className:w.value},P.buyin>0?v.v3.format(P.buyin):"None")),r.createElement("div",{className:w.item},r.createElement("div",{className:w.label},"Track"),r.createElement("div",{className:"".concat(w.value," clickable"),onClick:function(){return function(e){N("/apps/redline/tracks/".concat(e))}(P.id)}},null==H?void 0:H.Name," (",null==H?void 0:H.Distance,")")),r.createElement("div",{className:w.item},r.createElement("div",{className:w.label},"# of Laps"),r.createElement("div",{className:w.value},P.laps)),r.createElement("div",{className:w.item},r.createElement("div",{className:w.label},"Race Phasing"),r.createElement("div",{className:w.value},Boolean(T)?T.label:"Disabled")))),r.createElement("div",{className:w.racers},r.createElement("div",{className:w.header},r.createElement("span",null,"Racers")),r.createElement("div",{className:w.racersInner},Object.keys(P.racers).length>0?2==(null==P?void 0:P.state)?r.createElement(o.A,{style:{listStyle:"none"}},Object.keys(P.racers).filter(function(e){return P.racers[e].finished}).length>0&&r.createElement(r.Fragment,null,r.createElement(i.Ay,null,r.createElement("div",{className:w.label},"Podium")),Object.keys(P.racers).filter(function(e){return P.racers[e].finished}).sort(function(e,n){return P.racers[e].place-P.racers[n].place}).slice(0,3).map(function(e){return r.createElement(y.default,{key:e,name:e,race:P,track:H,racer:P.racers[e],onWinnings:V})})),Object.keys(P.racers).filter(function(e){return P.racers[e].finished&&P.racers[e].place>3}).length>0&&r.createElement(r.Fragment,null,r.createElement(i.Ay,null,r.createElement("div",{className:w.label},"Other Racers")),Object.keys(P.racers).filter(function(e){return P.racers[e].finished&&P.racers[e].place>3}).sort(function(e,n){return P.racers[e].place-P.racers[n].place}).map(function(e){return r.createElement(y.default,{key:e,name:e,race:P,track:H,racer:P.racers[e],onWinnings:V})})),Object.keys(P.racers).filter(function(e){return!P.racers[e].finished}).length>0&&r.createElement(r.Fragment,null,r.createElement(i.Ay,null,r.createElement("div",{className:w.label},"DNF'd")),Object.keys(P.racers).filter(function(e){return!P.racers[e].finished}).map(function(e){return r.createElement(y.default,{key:e,name:e,race:P,track:H,racer:P.racers[e],onWinnings:V})}))):Object.keys(P.racers).map(function(e){return r.createElement(y.default,{key:e,name:e,race:P,track:H,racer:P.racers[e],onRemove:re})}):r.createElement("div",{className:w.noracers},"No Racers Signed Up"))),Boolean(J)&&r.createElement(p.pT,{title:"Remove ".concat(J," From Event?"),open:Boolean(J),confirm:"Yes",decline:"No",onConfirm:ae,onDecline:function(){return $(null)}}),Boolean(M)&&r.createElement(p.aF,{open:Boolean(M),title:"".concat(M.name," Winnings"),onClose:function(){return V(null)}},r.createElement(o.A,{className:w.winningsBody},Boolean(null==M||null===(e=M.reward)||void 0===e?void 0:e.cash)&&r.createElement(i.Ay,null,r.createElement(u.A,{primary:"Cash",secondary:"$".concat(null==M||null===(n=M.reward)||void 0===n?void 0:n.cash)})),Boolean(null==M||null===(t=M.reward)||void 0===t?void 0:t.crypto)&&r.createElement(i.Ay,null,r.createElement(u.A,{primary:"Crypto",secondary:"".concat(null==M||null===(s=M.reward)||void 0===s?void 0:s.crypto," $").concat(null==M||null===(h=M.reward)||void 0===h?void 0:h.coin)})))),r.createElement(p.aF,{form:!0,open:Z,title:"Invite Racer To Event",submitLang:"Send Invite",onAccept:ce,onClose:function(){return q(!1)}},r.createElement(p.gV,{app:k,fullWidth:!0,autoFocus:!0,required:!0,label:"Alias",name:"alias",color:"secondary",inputProps:{maxLength:32}}))):r.createElement("div",null,"Viewing Legacy Races Not Yet Supported"):r.createElement(p.aH,{static:!0,text:"Loading Race Data"}))}},58796:(e,n,t)=>{t.r(n),t.d(n,{default:()=>E});var r=t(96540),a=t(62969),c=t(32849),l=t(46784),o=t(47767),i=t(95093),u=t.n(i),s=t(44635),d=t(1471),m=t(82241),f=t(44448),p=t(11641),v=t(69733),y=(0,a.A)(function(e){return{race:{display:"flex",fontFamily:"Aclonica",transition:"background ease-in 0.15s","&:hover":{background:e.palette.secondary.dark,cursor:"pointer"}},placing:{width:50,textAlign:"center",lineHeight:"50px","& span":{fontFamily:"Lexend Peta",color:function(e){return e.color},fontSize:34}},label:{flexGrow:1,maxWidth:"calc(100% - 100px)",width:"100%"},raceNameBasic:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:"50px"},raceName:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:"24px",marginTop:6},trackName:{fontSize:12,lineHeight:"14px","& small":{fontSize:10}},arrow:{width:50,textAlign:"center",lineHeight:"50px"},action:{fontSize:18,"&:not(:last-of-type)":{marginRight:4}}}});const E=function(e){var n=e.race,t=e.name,a=e.racer,i=e.onRemove,E=void 0===i?null:i,b=e.onWinnings,h=void 0===b?null:b,g=(0,c.dp)("redline"),k=y(g),w=(0,o.Zp)(),S=(0,v.d4)(function(e){return e.data.data.player}),A=function(){w("/apps/redline/profile/".concat(t))};if(a.finished){var N=u().duration(a.fastest.lap_end-a.fastest.lap_start);return r.createElement(s.Ay,null,r.createElement(d.A,null,Boolean(a.place)?"#".concat(a.place):"DNF"),r.createElement(m.A,{primary:t,secondary:r.createElement("span",null,"Fastest Lap:"," ","".concat(String(N.hours()).padStart(2,"0"),":").concat(String(N.minutes()).padStart(2,"0"),":").concat(String(N.seconds()).padStart(2,"0"),":").concat(String(N.milliseconds()).padStart(3,"0")))}),r.createElement(f.A,null,Boolean(a.reward)&&Boolean(h)&&r.createElement(p.A,{className:k.action,onClick:function(){h({name:t,event:n.name,reward:a.reward})}},r.createElement(l.g,{icon:["fas","dollar"]})),r.createElement(p.A,{className:k.action,onClick:A},r.createElement(l.g,{icon:["fas","user"]}))))}return r.createElement(s.Ay,null,r.createElement(d.A,null,"-"),r.createElement(m.A,{primary:t}),r.createElement(f.A,null,Boolean(E)&&n.host_id==S.SID&&a.sid!=S.SID&&r.createElement(p.A,{className:k.action,onClick:function(){return E(t)}},r.createElement(l.g,{icon:["fas","x"]})),r.createElement(p.A,{className:k.action,onClick:A},r.createElement(l.g,{icon:["fas","user"]}))))}},72608:(e,n,t)=>{t.d(n,{WX:()=>c,f0:()=>o,v3:()=>l});t(65848);var r=t(99418),a=t(25232),c=function(e){return(0,a.Ay)(r.A.sanitize(e))},l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),o=function(e){var n=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return n?"".concat(n[1],"-").concat(n[2],"-").concat(n[3]):null}}}]);