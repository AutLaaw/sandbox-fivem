"use strict";(self.webpackChunksandbox_phone=self.webpackChunksandbox_phone||[]).push([[495,890,2650,9439],{890:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var r=n(96540),a=n(69733),o=n(11641),l=n(40921),c=n(48719),i=n(14073),u=n(16576),s=n(49799),f=n(44635),p=n(82241),d=n(71543),m=n(41750),v=n(61224),y=n(69890),b=n(18740),h=n(62969),g=n(46784),k=n(32849),E=n(16783),w=n(92650),A=n(71544),T=n(99439);function S(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var i=r&&r.prototype instanceof c?r:c,u=Object.create(i.prototype);return C(u,"_invoke",function(n,r,a){var o,c,i,u=0,s=a||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return o=t,c=0,i=e,p.n=n,l}};function d(n,r){for(c=n,i=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],d=p.p,m=o[2];n>3?(a=m===r)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=d&&((a=n<2&&d<o[1])?(c=0,p.v=r,p.n=o[1]):d<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,c=0))}if(a||n>1)return l;throw f=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,i=m;(t=c<2?e:i)||!f;){o||(c?c<3?(c>1&&(p.n=-1),d(c,i)):p.n=i:p.v=i);try{if(u=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(f=p.n<0)?i:n.call(r,p))!==l)break}catch(t){o=e,c=1,i=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var l={};function c(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(C(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,C(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return i.prototype=u,C(f,"constructor",u),C(u,"constructor",i),i.displayName="GeneratorFunction",C(u,a,"GeneratorFunction"),C(f),C(f,a,"Generator"),C(f,r,function(){return this}),C(f,"toString",function(){return"[object Generator]"}),(S=function(){return{w:o,m:p}})()}function C(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}C=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){C(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},C(e,t,n,r)}function N(e,t,n,r,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){N(o,r,a,l,c,"next",e)}function c(e){N(o,r,a,l,c,"throw",e)}l(void 0)})}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,c=[],i=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D=(0,h.A)(function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},details:{"& h3":{color:e.palette.primary.main}},detailsList:{padding:10},buttons:{width:"100%",display:"flex",margin:"auto"},button:{width:"-webkit-fill-available",padding:20,color:e.palette.warning.main,"&:hover":{backgroundColor:"".concat(e.palette.warning.main,"14")}},buttonNegative:{width:"-webkit-fill-available",padding:20,color:e.palette.error.main,"&:hover":{backgroundColor:"".concat(e.palette.error.main,"14")}},buttonPositive:{width:"-webkit-fill-available",padding:20,color:e.palette.success.main,"&:hover":{backgroundColor:"".concat(e.palette.success.main,"14")}},creatorInput:{marginBottom:5},track:{background:e.palette.secondary.dark}}});const R=function(e){var t=D(),n=(0,a.wA)(),h=(0,k.MW)(),C=(0,k.Bm)(),N=(0,a.d4)(function(e){return e.data.data.tracks_pd}),P=(0,a.d4)(function(e){return e.pdRace.creator}),R=(0,a.d4)(function(e){return e.data.data.onDuty}),_=(0,a.d4)(function(e){var t;return null===(t=e.data.data.player)||void 0===t?void 0:t.Callsign}),O=C("PD_MANAGE_TRIALS","police"),H=j((0,r.useState)(null),2),B=H[0],z=H[1],F=j((0,r.useState)(!1),2),I=F[0],G=F[1],L=j((0,r.useState)(null),2),U=L[0],W=L[1],M=j((0,r.useState)(null),2),Y=M[0],q=M[1],Z=function(){var e=x(S().m(function e(){var t,r;return S().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("CreateTrackPD");case 1:return e.n=2,e.v.json();case 2:t=e.v,h(t?"Creator Started":"Unable to Start Creator"),t&&n({type:"PD_RACE_STATE_CHANGE",payload:{state:{checkpoints:0,distance:0,type:"lap"}}}),e.n=4;break;case 3:e.p=3,r=e.v,console.error(r),h("Unable to Start Creator");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),V=function(){var e=x(S().m(function e(){return S().w(function(e){for(;;)switch(e.n){case 0:try{E.A.send("StopCreator")}catch(e){console.error(e)}n({type:"PD_RACE_STATE_CHANGE",payload:{state:null}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=x(S().m(function e(t){var n,r;return S().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.preventDefault(),e.p=1,e.n=2,E.A.send("FinishCreatorPD",{name:t.target.name.value,type:t.target.type.value});case 2:return e.n=3,e.v.json();case 3:n=e.v,h(n?"Track Create":"Unable to Create Track"),G(!1),e.n=5;break;case 4:e.p=4,r=e.v,console.error(r),h("Unable to Create Track"),G(!1);case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=x(S().m(function e(){var t,n;return S().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("DeleteTrackPD",U);case 1:return e.n=2,e.v.json();case 2:t=e.v,W(null),z(null),h(t?"Track Deleted":"Unable to Delete Track"),e.n=4;break;case 3:e.p=3,n=e.v,console.error(n),W(null),z(null),h("Unable to Delete Track");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),J=function(){var e=x(S().m(function e(){var t,n;return S().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.A.send("ResetTrackHistoryPD",Y);case 1:return e.n=2,e.v.json();case 2:t=e.v,q(null),h(t?"Track History Reset":"Unable to Reset Track History"),e.n=4;break;case 3:e.p=3,n=e.v,console.error(n),q(null),h("Unable to Reset Track History");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}();return r.createElement(A.RT,{appId:"blueline",actionShow:Boolean(_)&&"police"==R&&O,actions:r.createElement(r.Fragment,null,Boolean(P)?r.createElement(r.Fragment,null,r.createElement(o.A,{onClick:V},r.createElement(g.g,{icon:["far","xmark"]})),r.createElement(o.A,{onClick:function(){return G(!0)}},r.createElement(g.g,{icon:["far","floppy-disk"]}))):r.createElement(o.A,{onClick:Z},r.createElement(g.g,{icon:["far","plus"]})))},_&&"police"==R?r.createElement(r.Fragment,null,N.map(function(e,n){return r.createElement(l.A,{key:"track-".concat(n),className:t.track,expanded:B===n,onChange:B===n?function(){return z(null)}:function(){return z(n)}},r.createElement(c.A,{expandIcon:r.createElement(g.g,{icon:["fas","chevron-down"]})},r.createElement(i.A,{className:t.heading},e.Name),r.createElement(i.A,{className:t.secondaryHeading},e.Distance)),r.createElement(u.A,null,r.createElement(s.A,null,r.createElement(f.Ay,null,r.createElement(p.A,{primary:"Name",secondary:e.Name})),r.createElement(f.Ay,null,r.createElement(p.A,{primary:"Type",secondary:T.TrackTypes[e.Type]})),r.createElement(f.Ay,null,r.createElement(p.A,{primary:"Distance",secondary:e.Distance})))),r.createElement(d.A,null),r.createElement(m.A,null,r.createElement(v.A,{size:"small",onClick:function(){return q(e.id)}},"Reset Lap History"),r.createElement(v.A,{size:"small",onClick:function(){return W(e.id)}},"Delete Track")))}),r.createElement(A.pT,{title:"Delete Track?",open:null!=U,confirm:"Yes",decline:"No",onConfirm:$,onDecline:function(){return W(null)}}),r.createElement(A.pT,{title:"Reset Track History?",open:null!=Y,confirm:"Yes",decline:"No",onConfirm:J,onDecline:function(){return q(null)}}),r.createElement(A.aF,{form:!0,open:I,title:"Create New Track",onClose:function(){return G(!1)},onAccept:X,submitLang:"Save Track",closeLang:"Cancel"},r.createElement(y.A,{className:t.creatorInput,fullWidth:!0,required:!0,label:"Name",name:"name",variant:"outlined"}),r.createElement(y.A,{select:!0,fullWidth:!0,required:!0,variant:"outlined",label:"Type",name:"type",defaultValue:"laps"},Object.keys(T.TrackTypes).map(function(e){return r.createElement(b.A,{key:e,value:e},T.TrackTypes[e])})))):r.createElement(w.default,null))}},30495:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(96540),a=n(62969),o=n(32849),l=n(46784),c=n(47767),i=(0,a.A)(function(e){return{race:{display:"flex",fontFamily:"Aclonica",borderBottom:"1px solid ".concat(e.palette.border.divider),padding:"8px 0",background:e.palette.secondary.dark,transition:"background ease-in 0.15s","&:hover":{background:e.palette.secondary.light,cursor:"pointer"}},classIcon:{width:50,textAlign:"center",lineHeight:"50px","& span":{fontFamily:"Lexend Peta",color:function(e){return e.color},fontSize:26}},label:{flexGrow:1,maxWidth:"calc(100% - 100px)",width:"100%"},raceName:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:"27px",marginTop:4},trackName:{fontSize:12,lineHeight:"14px","& small":{fontSize:10}},arrow:{width:50,textAlign:"center",lineHeight:"50px"}}});const u=function(e){var t=e.track,n=e.race,a=(0,o.dp)("blueline"),u=i(a),s=(0,c.Zp)();return r.createElement("div",{className:u.race,onClick:function(){s("/apps/blueline/view/".concat(n.id))}},r.createElement("div",{className:u.classIcon},"All"!=n.class?r.createElement("span",null,n.class):r.createElement("span",null,"-")),r.createElement("div",{className:u.label},r.createElement("div",{className:u.raceName},n.name),r.createElement("div",{className:u.trackName},t.Name," ",r.createElement("small",null,"(",Object.keys(n.racers).length," Racers)"))),r.createElement("div",{className:u.arrow},r.createElement(l.g,{icon:["far","chevron-right"]})))}},92650:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(96540),a=n(62969),o=n(32849);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=(0,a.A)(function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,textAlign:"center"},content:c(c(c(c({margin:"auto",position:"absolute",top:0,bottom:0,left:0,right:0,height:"fit-content",width:"fit-content"},"width","80%"),"fontSize",28),"fontWeight","bold"),"color",function(e){return e.color})}});const u=function(e){var t=(0,o.dp)("blueline"),n=i(t);return r.createElement("div",{className:n.wrapper},r.createElement("div",{className:n.content},"Not Authorized"))}},99439:(e,t,n)=>{n.r(t),n.d(t,{TrackTypes:()=>d,default:()=>v});var r=n(96540),a=n(69733),o=n(11641),l=n(62969),c=n(46784),i=n(47767),u=n(32849),s=n(92650),f=n(71544),p=n(30495),d={laps:"Laps",p2p:"Point to Point"},m=(0,l.A)(function(e){return{header:{display:"inline-block",fontSize:16,marginLeft:8,"& svg":{marginRight:4}},content:{height:"92%",overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.primary.main},"&::-webkit-scrollbar-track":{background:"transparent"}},user:{width:"100%",padding:10,borderBottom:"1px solid ".concat(e.palette.border.divider),"& span":{color:function(e){return e.color}}},noRaces:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"}}});const v=function(e){var t,n=(0,u.dp)("blueline"),l=m(n),d=(0,u.Bm)(),v=(0,i.Zp)(),y=(0,a.d4)(function(e){return e.data.data.onDuty}),b=(0,a.d4)(function(e){var t;return null===(t=e.data.data.player)||void 0===t?void 0:t.Callsign}),h=d("PD_MANAGE_TRIALS","police"),g=null!==(t=(0,a.d4)(function(e){return e.data.data.tracks_pd}))&&void 0!==t?t:Array(),k=(0,a.d4)(function(e){return e.pdRace.races}),E=Object.keys(k).reduce(function(e,t){var n,r;return Boolean(k[t])&&-1!=(null===(n=k[t])||void 0===n?void 0:n.state)&&2!=(null===(r=k[t])||void 0===r?void 0:r.state)&&e.push(k[t]),e},Array()).sort(function(e,t){return t.time-e.time});return r.createElement(f.RT,{appId:"blueline",titleOverride:"Trials - Pending Races",actionShow:Boolean(b)&&"police"==y,actions:r.createElement(r.Fragment,null,r.createElement(o.A,{onClick:function(){return v("/apps/blueline/completed",{replace:!0})}},r.createElement(c.g,{icon:["far","clock-rotate-left"]})),r.createElement(o.A,{onClick:function(){return v("/apps/blueline/new")}},r.createElement(c.g,{icon:["far","plus"]})),Boolean(h)&&r.createElement(o.A,{onClick:function(){return v("/apps/blueline/admin")}},r.createElement(c.g,{icon:["fad","shield-halved"]})))},b&&"police"==y?r.createElement(r.Fragment,null,r.createElement("div",{className:l.user},"Welcome Back ",r.createElement("span",null,b)),r.createElement("div",{className:l.content},Boolean(E)&&E.length>0?E.map(function(e,t){var n=g.filter(function(t){return t.id==e.track})[0];return r.createElement(p.default,{key:"pending-".concat(t),track:n,race:e})}):r.createElement("div",{className:l.noRaces},"No Pending Races"))):r.createElement(s.default,null))}}}]);