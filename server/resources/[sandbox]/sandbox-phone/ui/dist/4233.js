"use strict";(self.webpackChunksandbox_phone=self.webpackChunksandbox_phone||[]).push([[4233],{53190:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(96540),o=n(60538),a=n(62969),i=n(59399),c=n(13554),l=n.n(c),u=n(93300),s=n.n(u),p=n(84976),f=n(19663),m=n(32849),d=n(37923),h=(0,a.A)(function(e){return{textWrap:{width:"100%",fontSize:16,margin:"20px 0px",padding:"0 10px",color:e.palette.text.light,position:"relative","&:first-of-type":{marginTop:0}},myMsg:{marginLeft:"auto",width:"fit-content",maxWidth:"75%",padding:15,borderRadius:15,background:function(e){return(0,f.A)(e.color).darken()},overflowWrap:"break-word",hyphens:"auto"},otherMsg:{marginRight:"auto",width:"fit-content",maxWidth:"75%",padding:15,borderRadius:15,background:function(e){return e.color},overflowWrap:"break-word",hyphens:"auto"},timestamp:{color:e.palette.text.main,fontSize:12,padding:"5px 5px 0px 5px"},messageImg:{display:"block",maxWidth:200},copyableText:{color:e.palette.primary.main,textDecoration:"underline","&:hover":{transition:"color ease-in 0.15s",color:e.palette.text.main,cursor:"pointer"}}}});const v=function(e){var t=e.message,n=e.isMe,a=void 0!==n&&n,c=(0,m.dp)("chatter"),u=h(c),f=(0,m.MW)(),v=[{regex:/^https?:\/\/(\w+\.)?imgur.com\/(\w*\d\w*)+(\.[a-zA-Z]{3})?$/gim,fn:function(e,t){return r.createElement(i.CopyToClipboard,{text:t[0],key:e,onCopy:function(){return f("Link Copied To Clipboard")}},r.createElement("img",{key:e,className:u.messageImg,src:t[0]}))}},{regex:/(http|https):\/\/(\S+)\.([a-z]{2,}?)(.*?)( |\,|$|\.)(mp4)/gim,fn:function(e,t){return r.createElement("div",null,r.createElement(l(),{key:e,volume:.25,width:"100%",controls:!0,url:"".concat(t[0])}))}},{regex:/(http|https):\/\/(\S+)\.([a-z]{2,}?)(.*?)( |\,|$|\.)/gim,fn:function(e,t){return r.createElement(i.CopyToClipboard,{text:t[0],key:e,onCopy:function(){return f("Link Copied To Clipboard")}},r.createElement("a",{className:u.copyableText},t.input))}},{regex:/(\S+)\.([a-z]{2,}?)(.*?)( |\,|$|\.)/gim,fn:function(e,t){return r.createElement(i.CopyToClipboard,{text:t[0],key:e,onCopy:function(){return f("Link Copied To Clipboard")}},r.createElement("a",{className:u.copyableText},t.input))}},{regex:/ircinvite=(\d)+/gim,fn:function(e,t){return r.createElement(p.N_,{key:e,className:u.copyableText,to:"/apps/irc/join/".concat(t[0].split("=")[1])},"IRC Invite: ",t[0].split("=")[1])}}];return r.createElement("div",{className:u.textWrap},r.createElement(o.A,{className:a?u.myMsg:u.otherMsg},d(v)(t.message)),r.createElement("div",{className:u.timestamp,style:{textAlign:a?"right":"left"}},r.createElement(s(),{unix:!0,date:t.timestamp,titleFormat:"L LT",withTitle:!0,fromNow:!0})))}},54233:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var r=n(96540),o=n(2543),a=n(62969),i=n(40244),c=n(69733),l=n(69890),u=n(81385),s=n(11641),p=n(12421),f=n(18740),m=n(46784),d=n(47767),h=n(67310),v=n(71544),b=n(32849),g=n(16783),y=n(19663),E=n(53190),w=n(32434);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var l=r&&r.prototype instanceof c?r:c,u=Object.create(l.prototype);return T(u,"_invoke",function(n,r,o){var a,c,l,u=0,s=o||[],p=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,l=e,f.n=n,i}};function m(n,r){for(c=n,l=r,t=0;!p&&u&&!o&&t<s.length;t++){var o,a=s[t],m=f.p,d=a[2];n>3?(o=d===r)&&(l=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(c=0,f.v=r,f.n=a[1]):m<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,f.n=d,c=0))}if(o||n>1)return i;throw p=!0,r}return function(o,s,d){if(u>1)throw TypeError("Generator is already running");for(p&&1===s&&m(s,d),c=s,l=d;(t=c<2?e:l)||!p;){a||(c?c<3?(c>1&&(f.n=-1),m(c,l)):f.n=l:f.v=l);try{if(u=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(p=f.n<0)?l:n.call(r,f))!==i)break}catch(t){a=e,c=1,l=t}finally{u=1}}return{value:t,done:p}}}(n,o,a),!0),u}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(T(t={},r,function(){return this}),t),p=u.prototype=c.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,T(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=u,T(p,"constructor",u),T(u,"constructor",l),l.displayName="GeneratorFunction",T(u,o,"GeneratorFunction"),T(p),T(p,o,"Generator"),T(p,r,function(){return this}),T(p,"toString",function(){return"[object Generator]"}),(O=function(){return{w:a,m:f}})()}function T(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}T=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){T(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},T(e,t,n,r)}function j(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function M(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){j(a,r,o,i,c,"next",e)}function c(e){j(a,r,o,i,c,"throw",e)}i(void 0)})}}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var I=(0,a.A)(function(e){return{messages:{flexGrow:1,overflow:"auto",padding:10,display:"flex",flexDirection:"column-reverse","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:function(e){return(0,y.A)(e.color).brighten(1)}},"&::-webkit-scrollbar-track":{background:"transparent"}},inputContainer:{display:"flex",padding:15,height:"12%"},input:{flexGrow:1,"& .MuiInputBase-root":{borderRadius:30}},sendBtn:{height:56,width:56,marginLeft:15,transition:"color ease-in 0.15s","&:hover":{color:function(e){return(0,y.A)(e.color).brighten(1)}}},noMsgs:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"},title:{display:"flex",position:"relative","& span":{marginLeft:40}},headerIcon:{width:35,height:35,position:"absolute",top:0,bottom:0,margin:"auto"},inner:{height:"100%",display:"flex",flexDirection:"column"}}}),P=(0,i.A)(function(e){return{root:{"& label.Mui-focused":{color:function(e){var t=e.app;return(0,y.A)(t.color).brighten(1)}},"& .MuiInput-underline:after":{borderBottomColor:function(e){var t=e.app;return(0,y.A)(t.color).brighten(1)}},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:function(e){var t=e.app;return(0,y.A)(t.color).brighten(1)}}}}}})(l.A);const R=function(){var e,t=(0,b.dp)("chatter"),n=I(t),a=(0,c.wA)(),i=(0,d.Zp)(),l=(0,b.MW)(),y=(0,d.g)().channel,C=(0,c.d4)(function(e){return e.data.data.player.SID}),k=(0,c.d4)(function(e){return e.chatter.groups.filter(function(e){return e.id==+y})[0]}),S=(0,r.useRef)(null),T=G((0,r.useState)(!1),2),j=T[0],D=T[1],N=G((0,r.useState)(!1),2),R=N[0],_=N[1],L=G((0,r.useState)(!1),2),B=L[0],W=L[1],F=G((0,r.useState)(!1),2),H=F[0],z=F[1],$=G((0,r.useState)(!1),2),U=$[0],V=$[1],Y=G((0,r.useState)(0),2),J=Y[0],Z=Y[1],q=G((0,r.useState)([]),2),X=q[0],K=q[1],Q=G((0,r.useState)({left:110,top:0}),2),ee=Q[0],te=Q[1],ne=(0,r.useMemo)(function(){return(0,o.throttle)(M(O().m(function e(){var t,n;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!j){e.n=1;break}return e.a(2);case 1:return D(!0),e.p=2,e.n=3,g.A.send("Chatter:GetMessageCount",+y);case 3:return e.n=4,e.v.json();case 4:t=e.v,Boolean(t)&&Z(t),e.n=6;break;case 5:e.p=5,n=e.v,console.error(n);case 6:D(!1);case 7:return e.a(2)}},e,null,[[2,5]])})),1e3)},[]);(0,r.useEffect)(function(){ne()},[y]);var re=function(){var e=M(O().m(function e(){var t,n,r;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!j){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,g.A.send("Chatter:LoadMessages",{channel:+y,offset:null!==(t=null==X?void 0:X.length)&&void 0!==t?t:0});case 2:return e.n=3,e.v.json();case 3:if(!(n=e.v)){e.n=4;break}K([].concat(A(X),A(n))),e.n=5;break;case 4:throw n;case 5:e.n=7;break;case 6:e.p=6,r=e.v,console.error(r);case 7:D(!1);case 8:return e.a(2)}},e,null,[[1,6]])}));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)(function(){Boolean(y)&&J>0&&0==X.length&&re()},[y,J]);var oe=(0,r.useMemo)(function(){return(0,o.throttle)(function(){var e=M(O().m(function e(t){var n,r;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:if(""==t){e.n=6;break}return e.p=1,e.n=2,g.A.send("Chatter:SendMessage",{channel:+y,message:t});case 2:return e.n=3,e.v.json();case 3:n=e.v,Boolean(n)&&K([].concat(A(X),[{id:n,message:t,author:C,timestamp:Date.now()/1e3}])),e.n=5;break;case 4:e.p=4,r=e.v,console.error(r);case 5:S.current.reset(),e.n=7;break;case 6:l("Message Must Have Content");case 7:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),3e3)},[X]),ae=function(){var e=M(O().m(function e(t){var n,r;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.preventDefault(),e.p=1,e.n=2,g.A.send("Chatter:Invite:Send",{channel:+y,sid:t.target.sid.value});case 2:return e.n=3,e.v.json();case 3:n=e.v,Boolean(n)?l("Group Invite Sent"):l("Failed Sending Group Invite"),e.n=5;break;case 4:e.p=4,r=e.v,console.error(r),l("Error Sending Group Invite");case 5:_(!1);case 6:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=M(O().m(function e(){var t;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g.A.send("Chatter:LeaveGroup",+y);case 1:return e.n=2,e.v.json();case 2:t=e.v,Boolean(t)&&(a({type:"CHATTER_REMOVE_GROUP",payload:{group:t}}),i("/apps/chatter",{replace:!0})),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=M(O().m(function e(){var t,n;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:return z(!1),e.p=1,e.n=2,g.A.send("Chatter:DeleteGroup",+y);case 2:return e.n=3,e.v.json();case 3:t=e.v,Boolean(t)&&(a({type:"CHATTER_REMOVE_GROUP",payload:{group:t}}),l("Group Deleted"),i("/apps/chatter",{replace:!0})),e.n=5;break;case 4:e.p=4,n=e.v,console.error(n),l("Failed Deleting Group");case 5:V(!1);case 6:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}();return r.createElement(v.Jp,{event:"CHATTER_CHANNEL_DELETED",onEvent:function(e){a({type:"CHATTER_REMOVE_GROUP",payload:e}),l("Group Was Deleted By The Group Owner"),i("/apps/chatter",{replace:!0})},state:{messages:X,messageCount:J,channel:y}},r.createElement(v.Jp,{event:"CHATTER_RECEIVED_MESSAGE",onEvent:function(e){e.group==+y&&K([].concat(A(X),[x(x({},e),{},{timestamp:e.timestamp})]))},state:{messages:X,messageCount:J,channel:y}},r.createElement(v.RT,{appId:"chatter",titleOverride:!!Boolean(k)&&r.createElement("div",{className:n.title},r.createElement(u.A,{className:n.headerIcon,src:k.icon,alt:k.label}),r.createElement("span",null,k.label)),actions:r.createElement(r.Fragment,null,r.createElement(s.A,{onClick:function(){return _(!0)}},r.createElement(m.g,{icon:"plus"})),C==(null==k?void 0:k.owner)?r.createElement(s.A,{onClick:function(e){e.preventDefault(),te({left:e.clientX-2,top:e.clientY-4}),V(!0)}},r.createElement(m.g,{icon:"ellipsis-vertical"})):r.createElement(s.A,{onClick:function(){return W(!0)}},r.createElement(m.g,{icon:"arrow-right-from-bracket"})))},r.createElement(p.A,{anchorReference:"anchorPosition",anchorPosition:ee,keepMounted:!0,open:U,onClose:function(){return V(!1)}},r.createElement(f.A,{onClick:function(){try{i("/apps/chatter/config/".concat(y))}catch(e){console.error(e)}V(!1)}},"Group Settings"),r.createElement(f.A,{onClick:function(){V(!1),z(!0)}},"Delete Group")),r.createElement("div",{className:n.inner},r.createElement("div",{className:n.messages,id:"scrollableDiv"},r.createElement(h.A,{dataLength:X.length,next:re,style:{display:"flex",flexDirection:"column-reverse"},inverse:!0,hasMore:(null!==(e=null==X?void 0:X.length)&&void 0!==e?e:0)<(null!=J?J:0),loader:r.createElement("h4",null,"Loading..."),scrollableTarget:"scrollableDiv"},Boolean(X)&&(null==X?void 0:X.length)>0?X.sort(function(e,t){return t.timestamp-e.timestamp}).map(function(e){return r.createElement(E.default,{key:e.id,message:e,isMe:e.author==C})}):r.createElement("div",{className:n.noMsgs},"No Message Have Been Sent"))),r.createElement("form",{className:n.inputContainer,onSubmit:function(e){e.preventDefault(),oe(e.target.text.value)},ref:S},r.createElement(P,{app:t,label:"Send Message",color:"secondary",name:"text",className:n.input}),r.createElement(s.A,{type:"submit",className:n.sendBtn},r.createElement(m.g,{icon:"share"})))),r.createElement(v.pT,{title:"Leave Chatter Group?",open:B,confirm:"Yes",decline:"No",onConfirm:ie,onDecline:function(){return W(!1)}}),r.createElement(v.pT,{title:"Delete Chatter Group?",open:H,confirm:"Yes",decline:"No",onConfirm:ce,onDecline:function(){return z(!1)}}),r.createElement(v.aF,{form:!0,open:R,title:"Send Group Invite",submitLang:"Invite",onAccept:ae,onClose:function(){return _(!1)}},r.createElement(w.HG,{required:!0,fullWidth:!0,app:t,allowNegative:!1,className:n.editField,label:"Target State ID",name:"sid",type:"tel",customInput:P})))))}}}]);